âœ… Loaded valid Tibber config
âœ… InfluxDB AI Service initialized
ğŸ” Starting memory monitor...
InfluxDB client initialized
Generated User ID: user_5f33f1a5
âœ… Dynamic pricing cron jobs initialized
Attempting WebSocket connection (attempt 1/10)...
âœ… Warning service initialized
âœ… Telegram notification service initialized
âœ… Enhanced notification service initialized
ğŸ”„ Initializing Tibber cache from InfluxDB...

ğŸ”‹ ========== ENHANCED DYNAMIC PRICING SYSTEM ==========
ğŸ”§ Enhanced Features:
   âœ… Intelligent Inverter Type Auto-Detection
   âœ… Automatic Command Mapping (legacy â†” new)
   âœ… Enhanced Grid Charging Control
   âœ… Smart Current Adjustment
   âœ… Advanced Price Intelligence (Tibber)
   âœ… Real-time Type Adaptation
   âœ… Enhanced Logging & Status Reporting
   âœ… Backward Compatibility
============================================================


ğŸ”‹ ========== TIBBER & AI CHARGING ==========
   âœ… Tibber Price Integration
   âœ… AI Charging Decisions
   âœ… Real-time Monitoring
   âœ… Automatic Optimization
==============================================

ğŸš€ CARBONOZ SolarAutopilot Server running on port 6789
ğŸ“Š Monitoring 6 inverter(s) and 1 battery(ies)
ğŸ“¡ MQTT Topic Prefix: solar_assistant
ğŸ” Inverter Type Detection: ACTIVE (auto-detects legacy, new, and hybrid)
ğŸ”„ Auto-Setting Mapping: ENABLED (intelligent command translation)
ğŸ’¡ Learner Mode: INACTIVE
ğŸ”‹ Enhanced System: READY

ğŸ¯ Enhanced system ready to auto-detect and manage all inverter types!
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
ğŸ“Š Querying InfluxDB for Tibber cache...
âœ… Loaded Tibber cache from InfluxDB: current price + 60 forecast points
âœ… Loaded Tibber cache from InfluxDB
Initializing data with inverter type support...
âœ… Existing pricing data is recent, no generation needed
Initializing data with inverter type support...
âœ… Existing pricing data is recent, no generation needed
âœ… Dynamic pricing integration initialized with intelligent inverter type support and automatic command mapping
âœ… System initialization complete with intelligent inverter type auto-detection support
ğŸ”„ Loading Tibber cache from InfluxDB...
â„¹ï¸  Tibber InfluxDB cache already loaded
WebSocket Error: Unexpected server response: 502
WebSocket closed with code 1006: . Reconnecting...
ğŸš€ Initial price data refresh on startup...
Running scheduled pricing data refresh...
ğŸ”„ Refreshing pricing data...
â„¹ï¸ Tibber not properly configured: { enabled: true, hasApiKey: true, keyLength: 1 }
â„¹ï¸ Using SMARD fallback
ğŸ“Š Attempting SMARD API...
âœ… Scheduled data refresh completed

ğŸ“‹ ========== ENHANCED SYSTEM STATUS CHECK ==========
ğŸ” Inverter Type Detection: Waiting for MQTT messages...
ğŸ—„ï¸  InfluxDB Connection: âœ… Connected
ğŸ“¡ MQTT Connection: âŒ Disconnected
======================================================

ğŸ¯ Enhanced System Ready!
   â€¢ Auto-detects and manages both legacy and new inverter types
   â€¢ Intelligently maps commands to appropriate MQTT topics
   â€¢ Maintains backward compatibility with existing systems
   â€¢ Delivers enhanced monitoring and control capabilities

Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
âœ… Saved 32 Tibber data points to InfluxDB
âœ… SMARD data refreshed successfully
âœ… Tibber price data refreshed automatically
Attempting WebSocket connection (attempt 2/10)...
WebSocket Error: WebSocket was closed before the connection was established
WebSocket closed with code 1006: . Reconnecting...

ğŸ©º === STARTUP DIAGNOSTICS ===

ğŸ” === TIBBER DIAGNOSTIC ===
Config: {
  enabled: true,
  apiKey: 'âš ï¸  May be too short (1 chars)',
  homeId: 'none (optional - will use first home)',
  country: 'DE',
  timezone: 'Europe/Berlin',
  currency: 'EUR'
}

â„¹ï¸  Note: API key saved exactly as entered (no validation).
â„¹ï¸  Home ID is optional - will automatically use first available home if not set.
===========================


â„¹ï¸  Tibber not configured
   Configure at: /settings

ğŸ¤– AI Engine:
   - Initialized: false
   - MQTT: false
   - System State: true

======================================

Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Attempting WebSocket connection (attempt 3/10)...
WebSocket Error: WebSocket was closed before the connection was established
WebSocket closed with code 1006: . Reconnecting...
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Attempting WebSocket connection (attempt 4/10)...
WebSocket Error: WebSocket was closed before the connection was established
WebSocket closed with code 1006: . Reconnecting...
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Attempting WebSocket connection (attempt 5/10)...
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
WebSocket Error: WebSocket was closed before the connection was established
WebSocket closed with code 1006: . Reconnecting...
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Attempting WebSocket connection (attempt 6/10)...
WebSocket Error: WebSocket was closed before the connection was established
WebSocket closed with code 1006: . Reconnecting...
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Attempting WebSocket connection (attempt 7/10)...
WebSocket Error: WebSocket was closed before the connection was established
WebSocket closed with code 1006: . Reconnecting...
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Attempting WebSocket connection (attempt 8/10)...
WebSocket Error: WebSocket was closed before the connection was established
WebSocket closed with code 1006: . Reconnecting...
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
ğŸ”„ Auto-refresh (cron)...
ğŸ”„ Refreshing pricing data...
â„¹ï¸ Tibber not properly configured: { enabled: true, hasApiKey: true, keyLength: 1 }
â„¹ï¸ Using SMARD fallback
ğŸ“Š Attempting SMARD API...
âœ… Saved 32 Tibber data points to InfluxDB
âœ… SMARD data refreshed successfully
âœ… Cron: Data refreshed
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
Reconnecting to MQTT broker...
MQTT error: getaddrinfo ENOTFOUND homeassistant-andreas-raspberry.zebu-beaufort.ts.net
